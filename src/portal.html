<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/portal.css">
        <link rel="stylesheet" href="css/manual.css">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/bootstrap-grid.css">
        <script src="https://kit.fontawesome.com/1ada55961c.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

        <!-- Map Imports -->
            <!-- Import ArcGIS Map CSS -->
            <link rel="stylesheet" href="https://js.arcgis.com/4.15/esri/themes/light/main.css" />

            <!-- Import ArcGIS 4.15 Library. -->
            <script src="https://js.arcgis.com/4.15/"></script>

            <!-- Import Custom Map Setup Javascript. -->
            <script src="components/map.js"></script>
        <!-- End Map Imports -->

        <script>
            const FIRST_STEP = 1;
            const LAST_STEP = 3;

            var currentStep = 1;

            $(document).ready(function() {

                //Webpage starts on step 1 so hide step 2 and 3 and other irrelevant controls.
                $('#step2-options').hide();
                $('#step3-options').hide();

                $('#step2-content').hide();
                $('#step3-content').hide();

                $('#previous-step-button').hide();
                $('#download-button').hide();

                //User clicks a step.
                $('.step').click(function () {
                    //Get step number and select that step.
                    var id = $(this)[0].id;
                    currentStep = parseInt(id.charAt(id.length - 1));

                    selectStep(currentStep);
                });

                //User clicks "Previous Step" button.
                $('#previous-step-button').click(function() {
                    currentStep--;
                    selectStep(currentStep);
                });

                //User clicks "Next Step" button.
                $('#next-step-button').click(function() {
                    currentStep++;
                    selectStep(currentStep);
                });

                //Variables quick sort filter 
                $(".search-txt").keyup(function () {
                    var value = $(this).val().toLowerCase();

                    $('.variable-list div').each(function () {
                        $(this).hide();

                        if ($(this).text().toLowerCase().indexOf($.trim(value)) >= 0) {
                            $(this).show();
                        }
                    })
                });
            });

            function selectStep(stepInt) {
                if (stepInt >= FIRST_STEP && stepInt <= LAST_STEP) {
                    //Highlight selected step.
                    $('.step').removeClass('selected');
                    $('#step' + stepInt).addClass('selected');

                    //Hide all options and content.
                    $('.options').hide();
                    $('.content').hide();

                    //Show the selected options and content.
                    $('#step' + stepInt + '-options').show();
                    $('#step' + stepInt + '-content').show();

                    //Show/Hide "Previous Step" button.
                    if (stepInt == FIRST_STEP) 
                        $('#previous-step-button').hide();
                    else
                        $('#previous-step-button').show();

                    //Show/Hide "Next Step" and "Download" buttons.
                    if (stepInt == LAST_STEP) {
                        $('#next-step-button').hide();
                        $('#download-button').show();
                    }
                    else {
                        $('#next-step-button').show();
                        $('#download-button').hide();
                    }
                }
            }
        </script>
    </head>
    <body>
        <div class="container-fluid content-stretcher">
            <div class="row content-stretcher-header justify-content-center" style="min-height: 106px">
                <div class="col-md-3">
                    <img alt="Climate Futures Logo" src="img/logo-small.png" style="margin-top: 30px;" />
                </div>
                <div class="col-md-3">
                    <main>
                        <p class="tagline">
                            Climate Science for Australia's Future
                        </p>
                    </main>
                </div>
            </div>
            <div class="row" id="steps">
                <a href="#" class="col-sm-12 col-md-3 step selected switch-btn" id="step1">Area</a>
                <a href="#" class="col-sm-12 col-md-3 step switch-btn" id="step2">Time and Variables</a>
                <a href="#" class="col-sm-12 col-md-3 step switch-btn" id="step3">Download</a>
                <a href="manual.html" target="_blank" class="col-sm-12 col-md-3 step"><i class="fas fa-book" style="margin-right: 10px"></i>Manual</a>
            </div>
            <div class="row" id="options-container">
                <div class="row options" id="step1-options">
                    <div class="col-2 box align-self-start">
                        <h4>Example Box 1</h4>
                        <select>
                            <option>Option 1</option>
                            <option>Option 2</option>
                        </select>
                    </div>
                    <div class="col-3 box align-self-start">
                        <h4>Example Box 2</h4>
                        <input type="date" name="birthday" value="2020-12-31">
                    </div>
                    <a href="#" class="col-2 align-self-end side-button-right align-self-end orange">Import Shapefile</a>
                </div>
                <div class="row options" id="step2-options">
                    <div class="col-5 box align-self-start" >
                        <h4>Time Filter</h4>
                        <div class="row" style="padding: 0">
                        <div class="col-6 flex-row">
                            <label class="col-4" style="padding: 0;margin: 0">Start Date:</label>
                            <input type="date"  class="col-7">
                        </div>
                        <div class="col-6 flex-row">
                            <label class="col-4" style="padding: 0;margin: 0">End Date:</label>
                            <input type="date" class="col-7">
                        </div>
                        </div>
                    </div>
                    <div class="col-3 box align-self-start">
                        <h4>Ensemble Member</h4>
                        <div class="flex-row">
                            <label class="col-3" style="padding: 0;margin: 0">Select</label>
                            <select class="col-7">
                                <option>Option 1</option>
                                <option>Option 2</option>
                            </select>
                        </div>
                    </div>
                    <div  class="col-2 align-self-end search-box">
                        <input class="search-txt" type="text" name="" placeholder="Type to search">
                        <a class="search-btn" href="#"></a>
                    </div>
                </div>
                <div class="row options" id="step3-options">
                    <div class="col-2 box align-self-start">
                        <h4>Extract Format:</h4>
                        <select>
                            <option>Option 1</option>
                            <option>Option 2</option>
                        </select>
                    </div>
                    <div class="col-3 box align-self-start">
                        <h4>Size of Subset</h4>
                        <h6 id="extractSize"></h6>
                    </div>
                    <a href="#" class="col-2 align-self-end side-button-right align-self-end orange">This Is Step 3</a>
                </div>
            </div>
            <div class="row content-stretcher-content" id="content-container">
                <div class="content" id="step1-content" style="position: relative;">
                    <!-- Map Content -->
                    <!-- Div to hold map. -->
                    <div id="mapDiv" style="padding: 0; margin: 0; height: 100%; width: 100%;"></div>

                    <!-- Element to display mouse coordinates. -->
                    <p id="info" style="position:absolute; padding:2px 6px 2px 6px; background-color: #00000061; color:white; bottom:15px; right:15px;"></p>
                </div>
                <div class="content gap" id="step2-content">
                    <form class="variable-list">
                        <div>
                            <label for="Humidity">Humidity</label>
                            <input type="checkbox" id="Humidity" value="Humidity">
                        </div>
                        <div>
                        <label for="Temperature">Temperature</label>
                        <input type="checkbox" id="Temperature" value="Temperature">
                        </div>
                        <div>
                            <label for="Wind Direction">Wind Direction</label>
                            <input type="checkbox" id="Wind Direction" value="Wind Direction">
                        </div>
                    </form>
                </div>
                <div class="content gap" id="step3-content">

                    <h3>Selected period</h3>
                    <label>Start Date: </label>
                    <label>End Date:</label>
                    <br/>
                    <h3>Selected variables</h3>

                </div>
            </div>
            <div class="row content-stretcher-footer bg-dark-blue" style="min-height: 100px !important;">
                <a href="#" id="previous-step-button" class="col-2 align-self-end side-button-left align-self-end blue">Previous Step</a>
                <a href="#" id="next-step-button" class="col-2 align-self-end side-button-right align-self-end blue">Next Step</a>
                <a href="#" id="download-button" class="col-2 align-self-end side-button-right align-self-end blue switch-btn">Download</a>
            </div>
        </div>
    </body>
</html>